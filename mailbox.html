<html><body></body><script>
var module


(function() {	

	Object.defineProperty(Object.prototype, 'each', { value: function(fun) {
		for(var i in this) {
			if(this.hasOwnProperty(i))
				fun(i, this[i], this) } } })

	Object.defineProperty(Array.prototype, 'each', { value: function(fun) {
		for(var i = 0 ; i < this.length ; ++i) {
			fun(i, this[i], this) } } })

	var head = document.getElementsByTagName('head')[0]
	
	var fetch = function(address, ready, error) {
		var script = document.createElement('script')
		
		script.type = 'text/javascript'
		script.onerror = function() { throw("Error loading " + address) }
		script.src = address 
		head.appendChild(script) }

			

	var manager = {
		list: {},
		get: function(id, donotfetch) {
			var m = this.list[id]

			if(m == undefined) {
				var n = this
				m = this.list[id] = {
					id: id,
					ready: false,
					required: {},
					depends: {},
					finished: function(payload, depends) {
						var self = this
						self.finished = undefined
						self.payload = payload

						depends.each(function(k, v) {
							d = n.get(v)
							d.required[self.id] = self

							self.depends[d.id] = d })

						self.check() },

					check: function() {
						var ready = true

						this.depends.each(function(k, v) {
							if(v.ready == false) ready = false  })

						if(ready) {
							this.check = function() {}
							this.run() } },

					run: function() {
						this.run = undefined

						if(typeof this.payload == 'function') {
							var m = this
							this.payload = this.payload(function(id) { return m.depends[id].payload }) }


						this.ready = true

						this.required.each(function(k, v) { v.check() }) } }

				if(donotfetch != true) 
					fetch(id) }

			return m } }

	module = function(id, options, payload) {
		var m = manager.get(id, true)

		if(m.payload != undefined) throw("Module " + id + " already loaded.")
		
		m.finished(payload, options.depends ? options.depends : []) }
    
})()
</script>
<script>
module('browser', { depends: [] }, function(requires) {
	return {
		body: document.getElementsByTagName('body')[0],
		document: document,
		window: window } })
</script>
<script>
module('console', {}, function() {


	var lib = {
		log: function(m) { console.log(m) },
		info: function(m) { console.info(m) },
		error: function(m) { console.error(m) },
		warn: function(m) { console.warn(m) } }
	return lib
})
</script>
<script>
module('html', { depends: ['browser'] }, function(require) {
	var dom = require('browser').document

	var tag = function(tagname, rest) {
		var t = dom.createElement(tagname)
		if(rest.length > 0) {
			var s = 0
			if(typeof rest[0] == "object" && rest[0].innerHTML == undefined) {
				s = 1
				rest[0].each(function(k, v) {
					t.setAttribute(k, v) }) }

			for(; s < rest.length; s++) {
				var a = rest[s]
				if(typeof a == 'string') { a = dom.createTextNode(a) }
				t.appendChild(a) } }
		return t }


	return (function() { 
		var o = {}
		arguments.each(function(k, v) { 
			o[v] = function() { return tag(v, arguments) } })
		return o })('div', 'ul', 'li', 'input', 'html', 'p', 'span', 'b', 'i') })

</script>
<script>
module('main', { depends: ['browser', 'html'] }, function(require) {
	var dom = require('browser').document

	var body = require('browser').body
	var html = require('html')

	with(html) {
		body.appendChild(div({ id: "search-tips" }, 
			ul(
				li("Search ", span({ class: "syntax" }, "from Jerry"), " to display emails from Jerry"),
				li("Minus sign hides results containing the ", span({ class: "syntax" }, "-word")),
				li("You can use ", span({ class: "syntax" }, "/reg(e|x)p*[syn]t+a+x+/"))),

			div({ id: "search-box" },
				span({ id: "search-icon" }),
				input({ type: "text", spellcheck: "false", autocomplete: "on", placeholder: "Search" })))) }

	var search_tips = dom.getElementById('search-tips')
	var search_box = dom.getElementById('search-box').lastChild

	search_box.onblur = function() {
		search_box.parentNode.style.outline = 'none'
		search_tips.style.visibility = 'hidden'; }	
	search_box.onfocus = function() {
		search_box.parentNode.style.outline = 'orange solid 2px'
		search_tips.style.visibility = 'visible'; }



	with(html) {
		body.appendChild(div({ class: "snippet-box" },
			b({ class: "title" }, "Hello john..."),
			p({ class: "snippet" }, "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus..."),
			p({ class: "tagline" }, "from ", b("jerry"), " 15 minutes ago."))) }



})


</script>
<script>
var module


(function() {	

	Object.defineProperty(Object.prototype, 'each', { value: function(fun) {
		for(var i in this) {
			if(this.hasOwnProperty(i))
				fun(i, this[i], this) } } })

	Object.defineProperty(Array.prototype, 'each', { value: function(fun) {
		for(var i = 0 ; i < this.length ; ++i) {
			fun(i, this[i], this) } } })

	var head = document.getElementsByTagName('head')[0]
	
	var fetch = function(address, ready, error) {
		var script = document.createElement('script')
		
		script.type = 'text/javascript'
		script.onerror = function() { throw("Error loading " + address) }
		script.src = address 
		head.appendChild(script) }

			

	var manager = {
		list: {},
		get: function(id, donotfetch) {
			var m = this.list[id]

			if(m == undefined) {
				var n = this
				m = this.list[id] = {
					id: id,
					ready: false,
					required: {},
					depends: {},
					finished: function(payload, depends) {
						var self = this
						self.finished = undefined
						self.payload = payload

						depends.each(function(k, v) {
							d = n.get(v)
							d.required[self.id] = self

							self.depends[d.id] = d })

						self.check() },

					check: function() {
						var ready = true

						this.depends.each(function(k, v) {
							if(v.ready == false) ready = false  })

						if(ready) {
							this.check = function() {}
							this.run() } },

					run: function() {
						this.run = undefined

						if(typeof this.payload == 'function') {
							var m = this
							this.payload = this.payload(function(id) { return m.depends[id].payload }) }


						this.ready = true

						this.required.each(function(k, v) { v.check() }) } }

				if(donotfetch != true) 
					fetch(id) }

			return m } }

	module = function(id, options, payload) {
		var m = manager.get(id, true)

		if(m.payload != undefined) throw("Module " + id + " already loaded.")
		
		m.finished(payload, options.depends ? options.depends : []) }
    
})()
</script>
<style>
@font-face {
	font-family: "symbols";
	src: url("symbols.otf"); }

html, body {
	font-family: serif;
	margin: 0;
	padding: 0; }

#search-tips {
	padding: 12px;
	background: #0E041F;
	visibility: hidden; }

#search-tips ul {
	font-size: 0.8em;
	font-family: sans-serif;
	margin-top: 0;
	color: #A398B5;
	margin-right: 20%;
	margin-left: 20%; }

#search-tips .syntax {
	color: white;
	font-size: 1.3em;
	font-family: monospace; }

#search-box {
	overflow: hidden;
	padding-left: 3px;
	border: 1px solid white;
	background: white;
	width: 40%;
	margin-right: 30%;
	margin-left: 30%;
	font-size: 1.2em;
	visibility: visible; } 


#search-box input {
	width: 90%;
	outline: none;
	font-size: 1em;
	border: none; }

#search-icon { }

.snippet-box {
	width: 60%;
	margin-right: 20%;
	margin-left: 20%;
	margin-top: 12px;
	margin-bottom: 12px; }
.snippet-box .title {
	margin-left: 10px;
	font-size: 0.9em;
	margin-bottom: 5px; }
.snippet-box .tagline {
	color: gray;
	margin-top: 0;
	font-size: 0.8em;
	margin-left: 3em; }
.snippet-box .snippet {
	margin-top: 5px;
	margin-bottom: 5px; }


</style>
<script>
module('time', {}, function(require) {

	var time = {

		get: function() { return new Date().getTime() },

		delta: function() {
			var time = this
			var d = {
				last: time.get(),
				get: function() {
					var now = time.get()
					var result = now - this.last
					this.last = now
					return result } }

			return d } }

	return time })
</script>
</html>